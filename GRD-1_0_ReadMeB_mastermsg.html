<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>LAWMAN MOS / GRD-1 — Launch Gateway</title>
<link href="https://fonts.googleapis.com/css2?family=VT323&family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
:root{ --green:#64cd88; --glow:#9cd2b8; --light:#eef2ef; --header:#3a6b5c; }
html,body{
  margin:0;height:100%;background:#000;
  font-family:"VT323",monospace;color:var(--green);
  display:flex;align-items:center;justify-content:center;overflow:hidden;
}
.frame{width:800px;height:600px;background:#000;border:2px solid var(--green);
  box-sizing:border-box;position:relative;overflow:hidden;
  box-shadow:0 0 40px rgba(100,205,136,0.25), inset 0 0 22px rgba(156,210,184,0.10);}
.layer{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;}
.gateway-fx{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;
  animation:flickerGlobal 5.2s linear infinite;position:relative;}
.gateway-fx::after{content:"";position:absolute;inset:0;pointer-events:none;
  background:repeating-linear-gradient(to bottom,rgba(255,255,255,0.03)0 1px,transparent 1px 3px);
  mix-blend-mode:overlay;opacity:.22;}
@keyframes flickerGlobal{0%{filter:brightness(1);opacity:1;}6%{filter:brightness(.98);}
11%{filter:brightness(1.02);}18%{filter:brightness(.96);opacity:.98;}
25%{filter:brightness(1.03);}37%{filter:brightness(.97);}46%{filter:brightness(1);}
58%{filter:brightness(.95);opacity:.97;}64%{filter:brightness(1.04);}
79%{filter:brightness(.98);}87%{filter:brightness(1.02);}100%{filter:brightness(1);opacity:1;}}
h1{font-size:44px;margin:10px 0 0;text-shadow:0 0 8px var(--glow);}
h2{font-size:20px;margin:8px 0 36px;color:var(--glow);}
.btn,.action{
  font-family:'Press Start 2P',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  font-size:14px;padding:12px 22px;margin-top:6px;
  border:2px solid var(--green);color:var(--green);background:transparent;
  cursor:pointer;transition:all .15s ease;text-transform:uppercase;letter-spacing:0.5px;}
.btn:hover,.action:hover{background:var(--green);color:#000;box-shadow:0 0 15px var(--green);}
.logo-wrap{width:200px;margin-bottom:14px;opacity:.92;transition:opacity .6s ease;}
.logo-wrap svg{width:100%;height:auto;color:var(--green);
  filter:drop-shadow(0 0 4px rgba(100,205,136,0.55))
          drop-shadow(0 0 10px rgba(100,205,136,0.35))
          drop-shadow(0 0 18px rgba(100,205,136,0.20));
  animation:breathe 3s ease-in-out infinite;}
@keyframes breathe{0%{opacity:.92;}50%{opacity:1;}100%{opacity:.92;}}
#wipe{position:absolute;inset:0;background:#000;opacity:0;z-index:2;pointer-events:none;}
#wipe.active{animation:wipe .7s ease forwards;}
@keyframes wipe{0%{opacity:0;background:#fff;}50%{opacity:1;background:var(--glow);}100%{opacity:1;background:var(--light);}}
#archive{visibility:hidden;z-index:3;display:flex;align-items:center;justify-content:center;}
.console{width:740px;height:520px;background:var(--light);border:2px solid var(--header);
  box-shadow:0 8px 30px rgba(0,0,0,0.15);display:flex;flex-direction:column;}
.console header{background:var(--header);color:#fff;padding:8px 14px;
  font-family:'Press Start 2P';font-size:12px;text-transform:uppercase;letter-spacing:1px;}
.console main{flex:1;display:flex;flex-direction:column;padding:16px 16px 10px 16px;gap:12px;}
.terminal{flex:1;background:#fff;border:1px solid rgba(0,0,0,0.25);overflow:hidden;padding:14px 18px;}
.line{opacity:0;white-space:pre-wrap;color:#111;font-size:22px;line-height:1.25;}
.line.show{opacity:1;transition:opacity .12s ease;}
.await{margin-top:8px;font-size:22px;color:#111;display:none;}
.cursor{display:inline-block;width:10px;height:1em;background:var(--green);animation:blink 1s steps(2,start) infinite;}
@keyframes blink{to{visibility:hidden;}}
.actions{display:none;gap:14px;align-items:center;margin-top:56px;}
.console footer{margin:0;padding:6px 12px;border-top:1px solid rgba(0,0,0,.2);font-size:14px;color:#333;display:flex;justify-content:space-between;}
</style>
</head>
<body>
<div class="frame">
  <div id="gateway" class="layer">
    <div class="gateway-fx" id="gatewayFx">
      <div class="logo-wrap" id="lawmanLogo">
        <!-- (SVG omitted for brevity — unchanged from your v8.8 file) -->
      </div>
      <h1>LAWMAN MOS / PROJECT GRD-1</h1>
      <h2>CONFIDENTIAL - POST-TRANSMISSION EVALUATION GROUP ACCESS ONLY</h2>
      <button class="btn" id="startBtn">LAUNCH GATEWAY</button>
    </div>
  </div>

  <div id="archive" class="layer">
    <section class="console">
      <header>LAWMAN MOS ARCHIVE INTERFACE</header>
      <main>
        <div class="terminal" id="terminal">
          <div class="line" data-text="> LAWMAN MOS ARCHIVE INTERFACE v1.07"></div>
          <div class="line" data-text="> Security Level: CLASSIFIED / INTERNAL USE ONLY"></div>
          <div class="line" data-text=""></div>
          <div class="line" data-text="> PRIMARY INDEX FILES LOCATED:"></div>
          <div class="line" data-text=">   • README.TXT – Operational Overview & Handling Protocols"></div>
          <div class="line" data-text=">   • GHOSTWATCH.EXE – Active Reconstruction Environment"></div>
          <div class="line" data-text=""></div>
          <div class="line" data-text="> Advisory:"></div>
          <div class="line" data-text=">   Executing unverified builds may expose legacy signal data."></div>
          <div class="line" data-text=">   Proceed only if authorised for Project GRD-1 access."></div>
          <div class="line" data-text=""></div>
          <div class="line" data-text="> SELECT FILE TO EXECUTE"></div>
          <div class="await" id="awaitLine">&gt; AWAITING INPUT <span class="cursor"></span></div>
          <div class="actions" id="actions">
            <button class="action" id="readmeBtn">README.TXT</button>
            <button class="action" id="exeBtn">GHOSTWATCH.EXE</button>
          </div>
        </div>
      </main>
      <footer>
        <span>Keys: A/1 = README  ·  B/2 = GHOSTWATCH</span>
        <span>© LAWMAN MOS / GRD-1 ARCHIVE</span>
      </footer>
    </section>
  </div>

  <div id="wipe"></div>
</div>

<script>
let ac=null, master=null;
function initAudioAndBeep(){
  if(!ac){
    try{ac=new (window.AudioContext||window.webkitAudioContext)();master=ac.createGain();master.gain.value=0.14;master.connect(ac.destination);}catch(e){}
  }
  try{if(ac.state==='suspended'){ac.resume();}}catch(e){}
  quickBeep(920,0.065);
}
function quickBeep(freq,dur){
  if(!ac)return;
  const o=ac.createOscillator(),g=ac.createGain();o.type='square';o.frequency.value=freq;o.connect(g);g.connect(master);
  const t=ac.currentTime;g.gain.setValueAtTime(0,t);g.gain.linearRampToValueAtTime(0.25,t+0.004);
  g.gain.exponentialRampToValueAtTime(0.0001,t+dur);o.start(t);o.stop(t+dur);
}
function tickRandom(dur=0.028){
  if(!ac)return;const freq=1000+Math.random()*600;
  const o=ac.createOscillator(),g=ac.createGain();o.type='square';o.frequency.value=freq;o.connect(g);g.connect(master);
  const t=ac.currentTime;g.gain.setValueAtTime(0,t);g.gain.linearRampToValueAtTime(0.22,t+0.004);
  g.gain.exponentialRampToValueAtTime(0.0001,t+dur);o.start(t);o.stop(t+dur);
}

const startBtn=document.getElementById('startBtn');
const wipe=document.getElementById('wipe');
const gateway=document.getElementById('gateway');
const archive=document.getElementById('archive');
const actions=document.getElementById('actions');
const awaitLine=document.getElementById('awaitLine');

let started=false;
function activate(){
  if(started)return;started=true;
  initAudioAndBeep();
  wipe.classList.add('active');
  setTimeout(()=>{
    gateway.style.display='none';
    archive.style.visibility='visible';
    typeSequence();
  },700);
}
startBtn.addEventListener('click',activate);
window.addEventListener('keydown',e=>{if(e.code==='Enter'||e.code==='Space')activate();});

async function typeOut(element,text){
  element.textContent="";
  for(let i=0;i<text.length;i++){element.textContent+=text[i];tickRandom(0.022);await new Promise(r=>setTimeout(r,5));}
  element.classList.add('show');await new Promise(r=>setTimeout(r,60));
}
async function typeSequence(){
  const groups=[[0,1],[2],[3,4,5],[6],[7,8,9],[10,11]];
  const lines=[...document.querySelectorAll('.terminal .line')];
  for(const grp of groups){for(const idx of grp){const l=lines[idx];await typeOut(l,l.dataset.text||"");}await new Promise(r=>setTimeout(r,220));}
  awaitLine.style.display='block';actions.style.display='inline-flex';
}

/* Clean new behaviour */
document.getElementById('readmeBtn').addEventListener('click',()=>{ quickBeep(820,0.05); window.parent.postMessage('openReadMeB','*'); });
document.getElementById('exeBtn').addEventListener('click',()=>{
  quickBeep(720,0.05);
  window.parent.postMessage('launchGhostwatch','*');
});
window.addEventListener('keydown',e=>{ const k=e.key.toLowerCase(); if(k==='b'||k==='2') window.parent.postMessage('launchGhostwatch','*'); });
</script>
</body>
</html>
